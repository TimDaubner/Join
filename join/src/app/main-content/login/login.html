<section>
    <div [ngClass]="{
    'rePositioning': isNewPos,
    'hide-mobile-logo': isSignUp
  }" class="frame-logo">
        <img class="dark" src="./assets/icons/favicon.svg" alt="join_logo">
        <img class="light" src="./assets/icons/join_logo_white.svg" alt="join_logo">
    </div>
    @if(!isSignUp){
    <div class="sign-up">
        Not a Join user?
        <button class="sign-up-btn" (click)="changeOverlayToSignUp()">Sign up</button>
    </div>
    <div class="frame-login">
        <div class="login">
            <div class="head-login">
                <h1>Log in
                    <hr>
                </h1>
            </div>
            <form
                [ngClass]="{ 'margin-bottom': !mailModel.valid && mailModel.touched || !passwordModel.valid  && passwordModel.touched}"
                (ngSubmit)="loginUser()">
                <div class="input-group">
                    <input [ngClass]="{'red-border':!mailModel.valid && mailModel.touched}" #mailModel="ngModel"
                        type="text" name="email" placeholder="E-mail" [(ngModel)]="mailValue"
                        pattern="[a-zA-Z0-9._%+\-]+@[a-zA-Z0-9.\-]+\.[a-zA-Z]{2,}" required>
                    <img src="./assets/icons/mail_gray.svg" alt="Mail Icon" class="input-icon">
                </div>
                <div class="input-group">
                    <input [ngClass]="{'red-border':!passwordModel.valid && passwordModel.touched}"
                        #passwordModel="ngModel" (input)="onPasswordInput()" [type]="isVisible ? 'text' : 'password'"
                        name="password" placeholder="Password" [(ngModel)]="passwordValue" required minlength="4">
                    <img (click)="toggleVisibility()" [src]="passwordIcon" alt="Mail Icon" class="input-icon pointer">
                </div>
                @if(!mailModel.valid && mailModel.touched || !passwordModel.valid && passwordModel.touched) {
                <div class="error_msg"><span>Check your email and password (min. 4). Please try again</span></div>
                }
            </form>
            <div class="login-btns">
                <button [disabled]="!mailModel.valid || !passwordModel.valid" (click)="loginUser()"
                    class="login-btn">Log
                    in</button>
                <button (click)="loginAsGuest()" class="guest-login-btn">Guest Log in</button>
            </div>
        </div>
    </div>
    <div class="responsive-sign-up">
        Not a Join user?
        <button class="sign-up-btn" (click)="changeOverlayToSignUp()">Sign up</button>
    </div>
    }
    @else {
    <div class="frame-signup">
        <div class="signup">
            <img (click)="goBackToLogin()" src="./assets/icons/arrow_back.svg" alt="">
            <div class="head-login">
                <h1>Sign up
                    <hr>
                </h1>
            </div>
            <form
                [ngClass]="{ 'margin-bottom': !mailSignUp.valid && mailSignUp.touched || !password.valid  && password.touched}"
                (ngSubmit)="SignUp()">
                <div class="input-group">
                    <input [ngClass]="{'red-border':!firstName.valid && firstName.touched}" name="surname"
                        placeholder="First name" [(ngModel)]="auth_service.contact.surname" type="text" minlength="3"
                        #firstName="ngModel" pattern="^[a-zA-ZäöüÄÖÜ\s]*$" required>
                    <img src="./assets/icons/person_gray.svg" alt="Mail Icon" class="input-icon">
                </div>
                <div class="input-group">
                    <input [ngClass]="{'red-border':!lastName.valid && lastName.touched}" name="lastname"
                        placeholder="Last name" [(ngModel)]="auth_service.contact.lastname" type="text" minlength="3"
                        #lastName="ngModel" pattern="^[a-zA-ZäöüÄÖÜ\s]*$" required>
                    <img src="./assets/icons/person_gray.svg" alt="Mail Icon" class="input-icon">
                </div>
                <div class="input-group">
                    <input [ngClass]="{'red-border':!mailSignUp.valid && mailSignUp.touched}" #mailSignUp="ngModel"
                        type="text" name="email" placeholder="E-mail" [(ngModel)]="auth_service.contact.mail"
                        pattern="[a-zA-Z0-9._%+\-]+@[a-zA-Z0-9.\-]+\.[a-zA-Z]{2,}" required>
                    <img src="./assets/icons/mail_gray.svg" alt="Mail Icon" class="input-icon">
                </div>
                <div class="input-group">
                    <input
                        [ngClass]="{'red-border':!confirm_password.valid && confirm_password.touched || firstPassword !== confirmPassword}"
                        #password="ngModel" (input)="onPasswordInputP()" [type]="isVisible ? 'text' : 'password'"
                        name="password" placeholder="Password" [(ngModel)]="firstPassword" required minlength="6">
                    <img (click)="toggleVisibilityP()" [src]="passwordIcon" alt="Mail Icon" class="input-icon pointer">
                </div>
                <div class="input-group">
                    <input
                        [ngClass]="{'red-border':!confirm_password.valid && confirm_password.touched || firstPassword !== confirmPassword}"
                        #confirm_password="ngModel" (input)="onPasswordInputCP()"
                        [type]="isVisible ? 'text' : 'password'" name="confirmPassword" placeholder="Confirm Password"
                        [(ngModel)]="confirmPassword" required minlength="6">
                    <img (click)="toggleVisibilityCP()" [src]="passwordIcon" alt="Mail Icon" class="input-icon pointer">
                </div>
                @if(password.value !== confirm_password.value) {
                <div class="error_msg_signup"><span>Your passwords don't match. Please try again.</span></div>
                }
                <div class="input-group row">
                    <img (click)="toggleCheckbox()" class="checkbox"
                        [src]="isChecked ? '/assets/icons/checked.svg' : '/assets/icons/unchecked.svg'"
                        alt="Checkbox" />
                    <div class="text">
                        I accept the <a href="/privacy-policy">Privacy policy</a>
                    </div>
                </div>
            </form>
            <div class="signup-btn">
                <button (click)="SignUp()" class="login-btn"
                    [disabled]="!firstName.valid || !lastName.valid || !mailSignUp.valid || !password.valid || !confirm_password.valid || !isChecked">Sign
                    up</button>
            </div>
        </div>
    </div>
    }
    <div class="links">
        <a routerLink="/privacy-policy" routerLinkActive="active">Privacy Policy</a>
        <a routerLink="/legal-notice" routerLinkActive="active">Legal notice</a>
    </div>
</section>
<div class="overlay"></div>